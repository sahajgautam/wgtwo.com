"use strict";(self.webpackChunkworking_group_two_website=self.webpackChunkworking_group_two_website||[]).push([[7966],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=r,m=u["".concat(s,".").concat(h)]||u[h]||p[h]||i;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},10989:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return p}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),o={ccravps:"ccravps_lxWl"},l=["components"],s={slug:"the-worst-message-in-telco",title:"The worst message in telecom (you won't believe)",image:"./pengar_i_telefontornet.png",tags:["telco","diameter","credit-control","charging"],authors:["seba"]},c=void 0,d={permalink:"/jp/blog/the-worst-message-in-telco",editUrl:"https://github.com/working-group-two/wgtwo.com/edit/main/blog/../blog/2023-05-17-the-worst-message-in-telecom/index.mdx",source:"@site/../blog/2023-05-17-the-worst-message-in-telecom/index.mdx",title:"The worst message in telecom (you won't believe)",description:"Sorry for the click-bait title, I couldn't resist.",date:"2023-05-17T00:00:00.000Z",formattedDate:"May 17, 2023",tags:[{label:"telco",permalink:"/jp/blog/tags/telco"},{label:"diameter",permalink:"/jp/blog/tags/diameter"},{label:"credit-control",permalink:"/jp/blog/tags/credit-control"},{label:"charging",permalink:"/jp/blog/tags/charging"}],readingTime:10.54,hasTruncateMarker:!0,authors:[{name:"Sebastian Weddmark Olsson",title:"Tech Lead for Session Management & Protocol Termination",url:"https://www.linkedin.com/in/sebastian-weddmark-olsson/",imageURL:"/img/author-photos/swo.jpg",key:"seba"}],frontMatter:{slug:"the-worst-message-in-telco",title:"The worst message in telecom (you won't believe)",image:"./pengar_i_telefontornet.png",tags:["telco","diameter","credit-control","charging"],authors:["seba"]},nextItem:{title:"Achieving ISO 27001:2022 Certification: What You Need to Know",permalink:"/jp/blog/iso27001"}},u={image:n(14620).Z,authorsImageUrls:[void 0]},p=[{value:"What is charging?",id:"what-is-charging",level:2},{value:"What is the problem?",id:"what-is-the-problem",level:2},{value:"Summary",id:"summary",level:2}],h={toc:p},m="wrapper";function g(e){var t=e.components,s=(0,r.Z)(e,l);return(0,i.kt)(m,(0,a.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Sorry for the click-bait title, I couldn't resist."),(0,i.kt)("p",null,"In this blog post I will describe online charging and go in depth on\nthe Credit-Control message, what it is used for, what it contains, and\nwhere it is sent."),(0,i.kt)("h2",{id:"what-is-charging"},"What is charging?"),(0,i.kt)("p",null,"If you (as a user of telephone services, aka subscriber) want to make a\nphone call, send SMS or use data services, then your operator wants to\nknow that you are able to pay for that action. This is called\ncharging, the method of collecting and checking the number of used\nservice units."),(0,i.kt)("p",null,"There is also the concept of billing that often goes hand in hand:\nInvoicing you for those charged services units."),(0,i.kt)("p",null,"There are multiple plans which you can have, for instance you might\nhave a prepaid SIM-card where you top up your saldo in advance, or you\nmight have a subscription plan which allows for some services for a\nfixed price."),(0,i.kt)("p",null,"The operators might handle the user's session with regards to charging\nin two ways. Either they are using offline charging, or an online\ncharging system."),(0,i.kt)("p",null,"Offline charging cannot affect user sessions in real time, it\ncalculates the charging records after the session is finished and updates\nthe user's values. For instance you might get the invoice after the\nmonth finishes with the cost of your usage.  In order to send the\ninvoice, the operator need to collect records of the user's usage,\nthese records are called Charging Detail Records, and acronymed CDRs.\nThe CDRs are sent from all the parts of the network that handles the\nuser's session. For instance the SMSGW node is collecting CDRs for\nSMS-usage, a PGW for Data-usage, etc."),(0,i.kt)("p",null,"The other way is to have a online charging setup, where all the telco\nnodes need to ask for credits at the moment the user is using the\nservices. The system that gets the request is called an Online\nCharging System, or OCS in telco-lingo, and resides at the operator\ncontrol.  It is called online charging because it can actively affect\nthe user session in real time, i.e. block or allow user actions based\non the values and calculations in the OCS. The different systems sends\na request toward the OCS asking for some action, e.g. SMSGW might ask\nthe OCS if the user has credits enough to send a message."),(0,i.kt)("p",null,"Basically the OCS is a database storing information about prices of\nthe operators services, as well as keeping track of the user's credits."),(0,i.kt)("p",null,"The pricing is based per operator and could go for example something\nlike this"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"100 free SMSes, after that 1 SEK per SMS"),(0,i.kt)("li",{parentName:"ul"},"60 free voice minutes, then 5:50 SEK per minute"),(0,i.kt)("li",{parentName:"ul"},"1 GB free data transfered per week")),(0,i.kt)("p",null,"All operators have different pricing models in order to compete with\neach other, not one model fits all etc. Therefore the OCS node has a\nlot of configuration parameters it can set. For instance if a\nsubscriber uses up all available data, should she be directed to a\ntop-up page to buy more data, or should the data usage be blocked or\nrate-limited, and if she doesn't use up all data, should the remaining\ndata be added to a future pot, available only next period or until\nused up?"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"The OCS in the network",src:n(66938).Z,width:"1436",height:"1096"})),(0,i.kt)("p",null,"This picture shows how you the subscriber and the OCS are located in\nthe network. Your phone connects to the antennas of the visiting\nnetwork. The visiting network is the network that owns the antennas\nand spectrums, aka mobile network operator or MNO. In Sweden, it is one\nof Telia, Tele2, Telenor, or Tre. In Germany it is Telekom, O2, or\nVodafone. Wikipedia has\n",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/List_of_mobile_network_operators#By_region"},"lists"),"\nif you want to check your country's MNOs."),(0,i.kt)("p",null,"When using one of the services provided, a bunch of requests are sent\nfrom the visiting network to your home network, i.e. your operators\nnetwork. This network ",(0,i.kt)("em",{parentName:"p"},"could")," be the same network as the visiting\nnetwork, but it doesn't have to. For instance if you have a Telenor\nSIM-card, you could be in Telenors network if you are in Sweden, but\nyou could be in Telekoms network roaming if in Germany, or you could\nhave a Vimla SIM-card, which is an Swedish MVNO (virtual operator;\nmeaning they don't have their own licence for the radio bands, but\nthey have an agreement with Telenor to use their network.). It gets\ncomplicated quickly and I've only mentioned the visiting and home\nnetwork (there are others, e.g. interrogating network)."),(0,i.kt)("p",null,"Between the networks there are nodes called Signal Transfer Point\n(STP) or Diameter Relay Agents (DRA), depending on which technology\nyou use. Their purpose are to connect between networks and route\nmessages between nodes. You can think of it as routers with advance\nfunctionality for some specific protocols. I'm not going to go into\nthis much deeper, but I'll do mention some of the interfaces. I'll\nstart with the CAMEL interface (more specifically between the gsmSCF\n","[GSM Service Control Function]"," and gsmSSF ","[GSM Service Switching\nFunction]",")."),(0,i.kt)("p",null,"CAMEL (Customized Applications for Mobile networks Enhanced Logic)\nmake it possible for a home network to receive updates of it's users\nactions. As an example, when you start a call, the visiting network\nwill use CAMEL to send an InitialDP (user has entered a detection\npoint) message to the home network. The home network will then respond\nwith either Continue or Connect (if it accept the action) which lets\nthe user and visiting network to continue to set up the call, or the\nhome network can send a ReleaseCall message which denies the call to\nbe set up (or disconnects if the call is already set up)."),(0,i.kt)("p",null,"In our setup (as in Working Group Two setup), the OCS is managed by a\nthird party, a partner with us and our customer, and so there are DRAs\nconnecting the third party network with our network as well."),(0,i.kt)("p",null,"The home network will apply online charging by sending\nCredit-Control-Request messages to the OCS, which will lookup the\nsubscriber and the subscribers credits, and set the corresponding\npricing."),(0,i.kt)("h2",{id:"what-is-the-problem"},"What is the problem?"),(0,i.kt)("p",null,"Disclaimer: These are all my personal thoughts, and there are probably\nreasons the interface and messages are designed the way they are, that\nI yet don't grasp."),(0,i.kt)("p",null,"In my opinion there are too many different usages and definitions for\nthe Credit-Control message, it is to general and reused in too many\ndifferent cases."),(0,i.kt)("p",null,"First out is the network interfaces. An interface is the definition of\nhow nodes talk to each other. It usually specifies which nodes are\ninvolved, and which messages are allowed.  For instance the Ro\ninterface contains Credit-Control messages for SMS, MMS and voice\ncalls, between the IP Multimedia Subsystem (IMS) and the OCS.  There\nis also the Gy interface between the Packet Gateway (PGW) and the OCS,\nwhich also carries Credit-Control messages for data usage. As well as\nthe Gx interface which carries Credit-Control messages for... policy\ncontrol between PGW and the Policy and charging rules function (PCRF)\nto create service session level policy decisions."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Different OCS interfaces",src:n(37766).Z,width:"645",height:"588"})),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Interface"),(0,i.kt)("th",{parentName:"tr",align:null},"Application-ID"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Nodes involved"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Base"),(0,i.kt)("td",{parentName:"tr",align:null},"4"),(0,i.kt)("td",{parentName:"tr",align:null},"Diameter Credit-Control Application"),(0,i.kt)("td",{parentName:"tr",align:null},"Any: Credit-Control Client/Server")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Ro"),(0,i.kt)("td",{parentName:"tr",align:null},"4"),(0,i.kt)("td",{parentName:"tr",align:null},"Online charging for SMS, MMS, voice calls"),(0,i.kt)("td",{parentName:"tr",align:null},"IMS (CSCF), OCS")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Gy"),(0,i.kt)("td",{parentName:"tr",align:null},"4"),(0,i.kt)("td",{parentName:"tr",align:null},"Online charging for data services"),(0,i.kt)("td",{parentName:"tr",align:null},"PGW (PCEF), OCS")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Gx"),(0,i.kt)("td",{parentName:"tr",align:null},"16777238"),(0,i.kt)("td",{parentName:"tr",align:null},"Policy control for data and voice services"),(0,i.kt)("td",{parentName:"tr",align:null},"PGW (PCEF), PCRF")))),(0,i.kt)("p",null,'So even if we only focus on application for online charging, i.e. with\nApplication-ID set to 4, then we have the specifications for the\nCredit-Control message.  There are multiple specifications, the base\nDiameter defined in RFC4006, which can be used for any Diameter\napplication which would want to have online charging functions, as\nwell as the 3GPP (Telco) defined in TS 32.299, for how online charging\nshould work in telecommunication applications like the ones above.\n3GPP TS 32.299 is actually split up into multiple specifications\ndepending on which service or context used, each defines a number of\n"allowed fields" from TS 32.299 for the context.'),(0,i.kt)("p",null,"E.g.\n3GPP TS 32.251 for PS charging,\n3GPP TS 32.253 for CPDT charging,\n3GPP TS 32.254 for Exposure function API charging,\n3GPP TS 32.260 for IMS charging,\n3GPP TS 32.270 for MMS service charging,\n3GPP TS 32.271 for LCS service charging,\n3GPP TS 32.272 for PoC service charging,\n3GPP TS 32.273 for MBMS service charging,\n3GPP TS 32.274 for SMS service charging,\n3GPP TS 32.275 for MMTel service charging,\n3GPP TS 32.276 for VCS charging,\n3GPP TS 32.277 for ProSe charging,\n3GPP TS 32.278 for Monitoring Event charging,\n3GPP TS 32.280 for AoC Service Information, and\n3GPP TS 32.296 for ABMF Rc information"),(0,i.kt)("p",null,"The Diameter base specification for credit-control RFC4006, and the\nTelecom online charging specification 3GPP TS 32.299 specifications\nare similar but different, let us compare the top fields in the\n",(0,i.kt)("inlineCode",{parentName:"p"},"Request")," messages in Diameter dictionary form:"),(0,i.kt)("div",{className:o.ccravps},(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Base Credit-Control-Request"),(0,i.kt)("th",{parentName:"tr",align:null},"3GPP TS 32.299 Credit-Control-Request"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"< Diameter Header: 272, REQ, PXY >"),(0,i.kt)("td",{parentName:"tr",align:null},"< Diameter Header: 272, REQ, PXY >")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"< Session-Id >"),(0,i.kt)("td",{parentName:"tr",align:null},"< Session-Id >")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ Origin-Host }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ Origin-Host }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ Origin-Realm }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ Origin-Realm }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ Destination-Realm }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ Destination-Realm }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ Auth-Application-Id }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ Auth-Application-Id }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ Service-Context-Id }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ Service-Context-Id }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ CC-Request-Type }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ CC-Request-Type }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"{ CC-Request-Number }"),(0,i.kt)("td",{parentName:"tr",align:null},"{ CC-Request-Number }")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Destination-Host ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ Destination-Host ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ User-Name ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ User-Name ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ CC-Sub-Session-Id ]"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Acct-Multi-Session-Id ]"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Origin-State-Id ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ Origin-State-Id ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Event-Timestamp ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ Event-Timestamp ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Subscription-Id ]"),(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Subscription-Id ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Service-Identifier ]"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Termination-Cause ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ Termination-Cause ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Requested-Service-Unit ]"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Requested-Action ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ Requested-Action ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null},"[ AoC-Request-Type ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Used-Service-Unit ]"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ Multiple-Services-Indicator ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ Multiple-Services-Indicator ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Multiple-Services-Credit-Control ]"),(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Multiple-Services-Credit-Control ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Service-Parameter-Info ]"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ CC-Correlation-Id ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ CC-Correlation-Id ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"[ User-Equipment-Info ]"),(0,i.kt)("td",{parentName:"tr",align:null},"[ User-Equipment-Info ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null},"[ OC-Supported-Features ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Proxy-Info ]"),(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Proxy-Info ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Route-Record ]"),(0,i.kt)("td",{parentName:"tr",align:null},"*","[ Route-Record ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null}),(0,i.kt)("td",{parentName:"tr",align:null},"[ Service-Information ]")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"*","[ AVP ]"),(0,i.kt)("td",{parentName:"tr",align:null},"*","[ AVP ]"))))),(0,i.kt)("p",null,"A quick guide on how to read this:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"< AVP >")," indicates a mandatory Attribute-Value Pair with a fixed position in the message."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{ AVP }")," indicates a mandatory Attribute-Value Pair in the message."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"[ AVP ]")," indicates an optional Attribute-Value Pair in the message."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"*AVP")," indicates that multiple occurrences of an Attribute-Value Pair is possible.")),(0,i.kt)("p",null,"Each ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Name%E2%80%93value_pair"},"Attribute-Value\nPairs")," contain\ninformation over each field in the message, and they can contain deep\nstructure with multiple (grouped) fields."),(0,i.kt)("p",null,"The last field named ",(0,i.kt)("inlineCode",{parentName:"p"},"*[ AVP ]")," actually means that the message can\ncontain other arbitrary AVPs that are not mentioned, defined by the sender."),(0,i.kt)("p",null,"To comment on this, the messages are similar, but not compatible with\neach other. The same goes for the comparison of the\nsub-specifications, e.g. 3GPP TS 32.260 for IP multimedia subsystem\n(IMS) charging, and 3GPP TS 32.276 for Voice Call Services (VCS)\ncharging; they are similar but not compatible."),(0,i.kt)("p",null,"We've just scratched the surface of these messages and applications,\nbut I'm already tired."),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"Online charging as a concept is great to have in the portfolio, I\nbelieve. My concern is that some of the telco protocols seem to be\nhave written by the same people behind the AUTOSAR specification.\nAmbiguous, hard to understand, too many fields and different\ninterfaces, and vendors that does different things on top of it to get\ntheir things to work..."),(0,i.kt)("p",null,"(Sorry for being harsh to the people designing this, it's probably not\nthat easy)."),(0,i.kt)("p",null,"The issue is that this interface is not expected to be an interconnect\ninterface, meaning the operator owns the OCS system and can decide to\nsend whatever works internal in their own network for their own use\ncases."),(0,i.kt)("p",null,"What I would've liked is to split the messages and applications. 3GPP\nonline charging to get a separate application-id from base diameter\ncredit-control. Deprecation of TS 32.299 in favor of the context-based\nspecifications. It is too much things that happen in the current\nprotocol, specifications and messages."))}g.isMDXComponent=!0},66938:function(e,t,n){t.Z=n.p+"assets/images/ocs-in-network-f01d53d26d1700078456fae92dff3864.svg"},37766:function(e,t,n){t.Z=n.p+"assets/images/ocs-interfaces-26412fcf4ea0cde2eaa5b160bd71bd95.svg"},14620:function(e,t,n){t.Z=n.p+"assets/images/pengar_i_telefontornet-98aea8531503e9eb8f8feea13f256f4c.png"}}]);