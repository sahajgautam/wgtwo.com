"use strict";(self.webpackChunkworking_group_two_website=self.webpackChunkworking_group_two_website||[]).push([[3530],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),h=c(n),p=a,m=h["".concat(s,".").concat(p)]||h[p]||u[p]||r;return n?o.createElement(m,i(i({ref:t},d),{},{components:n})):o.createElement(m,i({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},94260:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return h}});var o=n(87462),a=n(63366),r=(n(67294),n(3905)),i=(n(62450),["components"]),l={slug:"first-voice-calls-on-5g",title:"We have just completed our first VoNR (5G) calls in a multi-handset environment",date:new Date("2022-11-17T00:00:00.000Z"),tags:["vonr","5G","4G","core","IMS","volte"],authors:["yan","db"]},s=void 0,c={permalink:"/jp/blog/first-voice-calls-on-5g",editUrl:"https://github.com/working-group-two/wgtwo.com/edit/main/blog/../blog/2022-11-16-vonr/index.md",source:"@site/../blog/2022-11-16-vonr/index.md",title:"We have just completed our first VoNR (5G) calls in a multi-handset environment",description:"If that headline was slightly incomprehensible to you, it means that we\u2019ve now made it possible to call pretty much anyone from a 5G-enabled handset that is connected to the Working Group Two 5G core via a 5G antenna. To be clear, we\u2019re not talking about making a \u201cfirst\u201d Voice over New Radio (VoNR) call (those took place way back in 2021), but about making VoNR calls from a set of major commercial off-the-shelf (COTS) 5G devices to other mobile and fixed handsets.",date:"2022-11-17T00:00:00.000Z",formattedDate:"November 17, 2022",tags:[{label:"vonr",permalink:"/jp/blog/tags/vonr"},{label:"5G",permalink:"/jp/blog/tags/5-g"},{label:"4G",permalink:"/jp/blog/tags/4-g"},{label:"core",permalink:"/jp/blog/tags/core"},{label:"IMS",permalink:"/jp/blog/tags/ims"},{label:"volte",permalink:"/jp/blog/tags/volte"}],readingTime:4.715,hasTruncateMarker:!0,authors:[{name:"Yan Grunenberger",title:"Software Engineer for Session Management & Protocol Termination",url:"https://www.linkedin.com/in/yangrunenberger/",imageURL:"/img/author-photos/yg.jpg",key:"yan"},{name:"D\u017eiugas Baltr\u016bnas",title:"Software Engineer",url:"https://www.linkedin.com/in/dziugas/",imageURL:"/img/author-photos/db.jpeg",key:"db"}],frontMatter:{slug:"first-voice-calls-on-5g",title:"We have just completed our first VoNR (5G) calls in a multi-handset environment",date:"2022-11-17T00:00:00.000Z",tags:["vonr","5G","4G","core","IMS","volte"],authors:["yan","db"]},prevItem:{title:"Unboxing the AWS Snowcone and using it as a local UPF",permalink:"/jp/blog/exploring-aws-snowcone"},nextItem:{title:"Here's what happened at Hackoween \ud83c\udf83",permalink:"/jp/blog/hackoween-october-2022"}},d={authorsImageUrls:[void 0,void 0]},h=[{value:"Here\u2019s what we did",id:"heres-what-we-did",level:2},{value:"Let&#39;s dig a little deeper",id:"lets-dig-a-little-deeper",level:2}],u={toc:h},p="wrapper";function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)(p,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"If that headline was slightly incomprehensible to you, it means that we\u2019ve now made it possible to call pretty much anyone from a 5G-enabled handset that is connected to the Working Group Two 5G core via a 5G antenna. To be clear, we\u2019re not talking about making a \u201cfirst\u201d Voice over New Radio (VoNR) call (those took place way back in 2021), but about making VoNR calls from a set of major commercial off-the-shelf (COTS) 5G devices to other mobile and fixed handsets. "),(0,r.kt)("p",null,"As we see it, voice continues to be relevant across \u201cGs\u201d, usage areas, and handset types. This year, we\u2019ve continued to rapidly adapt our voice stack to emerging needs. This included enabling it for 5G Standalone (SA; also called New Radio, or NR). We\u2019re doing this because we see strong effects of taking a platform approach, where adding something like VoNR becomes a relatively straightforward exercise. "),(0,r.kt)("p",null,"Let\u2019s put some emphasis on \u201crelatively\u201d because there are some thoughtful considerations to be made and some steps to be taken. In a pure 5G world, you\u2019ll have a fancy new radio with high bandwidth, low latency, and the opportunity to create little (or big) slices for various use cases. In addition to the radio, you\u2019ll have a new 5G SA core where all this beauty is enabled and managed. "),(0,r.kt)("p",null,"The situation right now is that even if you have a \u201c5G\u201d logo on the top of your handset, you are - in most commercial 5G networks - actually calling via 4G. This means that your handset needs to connect to a 4G core and an IP Multimedia Subsystem (IMS) core to act as the intermediary between you and the person you want to talk to. 4G radio network coverage is significantly better in most parts of the world and pretty much all handsets out there support that \u201cG\u201d. "),(0,r.kt)("p",null,"What we want is to enable a pure 5G play, that is, a 5G handset making 5G calls using exclusively a 5G stack all the way. This reduces complexity, improves reliability of calls by avoiding radio access technology changes, and enables effective use of network and handset resources (control plane and airtime). This is especially valuable in a private network or other greenfield environments. Most brownfield deployments have been designed to basically use the current network technology to support voice usage. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For example, during early 4G deployments, 3G voice was used, delaying the actual deployment of VoLTE (4G) technology. Similarly, 5G Non-Standalone (NSA) is still using a 4G anchor to support voice calls. In a pure, greenfield deployment, such as with CBRS or sXGP spectrum types, where customers will most likely deploy a single G (either 4G for cost/maturity driven reasons, or 5G for bandwidth per cell or future-proof reasons), voice will need to be supported from day one. ")),(0,r.kt)("h2",{id:"heres-what-we-did"},"Here\u2019s what we did"),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"1.")," We first got a hold of a set of COTS handsets featuring the major mobile handset chipsets in the market, from the likes of MediaTek, Samsung, Qualcomm and Huawei."),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"2.")," Then we connected our cloud-based IMS core to our 5G SA core. "),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"3.")," We connected our core to a commercial 5G antenna in our lab. The 5G antenna was procured from one of the major mobile network vendors. Interestingly, it didn\u2019t support VoNR out of the box, so we had to enable that setting. "),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"4.")," We then started testing the handsets (and their chipsets). We observed that they have different levels of maturity in their stacks. For example, we discovered that some handsets were unstable if they did not have access to the IMS core. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"A further explanation on that: a user equipment (UE), according to the 3GPP specs,  has a voice or data-centric setting they employ when registering on the network. For an UE with a voice-centric function, like handsets, most of them will try to connect to an IMS core. If a PDU session establishment request is not honored by the core, the handset will disconnect and reconnect, creating some fluctuations on the data connection. The only way to ensure those handsets got a proper data connection was to secure a connection to the IMS core. ")),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"5.")," Ultimately, we were able to establish voice calls in all directions - to 5G, 4G handsets (VoLTE), VoWifi and so on. "),(0,r.kt)("h2",{id:"lets-dig-a-little-deeper"},"Let's dig a little deeper"),(0,r.kt)("p",null,"5G handsets place voice calls by initiating a connection to the 5G network\u2019s IMS core. Handsets would disconnect or underperform if they couldn\u2019t establish that connection. The 5G core needs to implement an establishment and release of dedicated Quality of Service (QoS) flows. These flows tell the UE and antenna how to prioritize IP packets carrying call audio over other mobile data traffic. "),(0,r.kt)("p",null,"More specifically, a QoS flow is associated with standardized 5G QoS identifiers (5QI) that among other things define packet error rate and delay budget, and whether IP packets associated with the flow get a guaranteed bit rate. Only when a dedicated QoS flow for voice is established, the scheduler of the antenna as well as the rest of the involved 5G core elements have all the ingredients to prioritize a phone call over, say, a Netflix session in the background. "),(0,r.kt)("p",null,"The COTS handsets we tested behaved differently in how they handled the establishment of an IMS connection and QoS flow. That leads us to conclude that even in the 5G SA networks there are still some major interoperability challenges, including on the antenna side, which might be configured for data primarily, not voice. "),(0,r.kt)("p",null,"Nevertheless, 5G SA has reached a state where its technology can be procured and used with handsets available in the market."))}m.isMDXComponent=!0},62450:function(e,t,n){n.d(t,{Z:function(){return h}});var o=n(87462),a=n(63366),r=n(67294),i="figure_JG9S",l="image_HilK",s="caption_lOvI",c=n(79524),d=["src","caption"];var h=function(e){var t=e.src,n=e.caption,h=(0,a.Z)(e,d);return r.createElement("figure",(0,o.Z)({className:i},h),r.createElement("img",{src:(0,c.Z)(t),alt:n,className:l}),r.createElement("figcaption",{className:s},n))}}}]);